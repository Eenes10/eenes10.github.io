<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trigonometrik Deƒüer Hesaplayƒ±cƒ± ‚Äî Uygulama</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#6c74ff">

<style>
  :root{
    --card-w:760px;
    --accent1:#6c74ff;
    --accent2:#34d399;
    --bg1:#e6f2ff;
    --bg2:#bfe0ff;
    --glass: rgba(255,255,255,0.88);
    --muted:#445a78;
    --shadow: 0 18px 40px rgba(13,38,76,0.12);
    --spot-x: 50%;
    --spot-y: 50%;
    --spot-size: 220px;
    --spot-intensity: 1;
  }

  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Arial,Helvetica,sans-serif}
  html,body{height:100%;margin:0}
  body{
    background: linear-gradient(160deg,var(--bg1),var(--bg2));
    display:flex;align-items:center;justify-content:center;padding:28px;color:#07204a;overflow:hidden;
    transition:background .25s ease,color .25s ease;
  }

  .bg-grid{
    position:fixed;inset:0;z-index:0;pointer-events:none;opacity:0.28;
    background-image: repeating-linear-gradient(0deg, rgba(10,20,40,0.04) 0 1px, transparent 1px 28px),
                      repeating-linear-gradient(90deg, rgba(10,20,40,0.03) 0 1px, transparent 1px 28px);
    background-size: 100% 100%;
    animation: gridPan 40s linear infinite;
    mix-blend-mode:multiply;
    transition:opacity .3s ease, filter .3s ease;
  }
  @keyframes gridPan{from{background-position:0 0}to{background-position:400px 400px}}

  .spot {
    position:fixed; left:0; top:0; width:100%; height:100%;
    pointer-events:none; mix-blend-mode:screen; z-index:1;
    transition: opacity .25s ease, filter .24s ease, transform .24s ease;
    opacity: 1;
    filter: blur(10px) saturate(120%);
    background:
      radial-gradient(circle var(--spot-size) at var(--spot-x) var(--spot-y),
        rgba(255,255,255,calc(0.45 * var(--spot-intensity))) 0%,
        rgba(255,255,255,calc(0.20 * var(--spot-intensity))) 25%,
        rgba(160,190,255,calc(0.06 * var(--spot-intensity))) 55%,
        transparent 75%),
      radial-gradient(circle calc(var(--spot-size) * 0.5) at calc(var(--spot-x) - 6%) calc(var(--spot-y) - 4%),
        rgba(255,255,255,calc(0.22 * var(--spot-intensity))) 0%,
        rgba(255,255,255,0) 45%);
    will-change: background-position, opacity;
  }

  .dark body{ background: linear-gradient(160deg,#071428,#0b2a41); color: #cfe9ff; }
  .dark .bg-grid{ opacity:0.12; filter:brightness(0.8) }
  .dark .container{ background: rgba(6,12,30,0.72); box-shadow: 0 18px 40px rgba(0,0,0,0.6); }
  .dark .btn{ background:#071428; color:#cfe9ff; box-shadow:0 6px 18px rgba(2,6,23,0.4); }
  .dark .btn.active{ box-shadow:0 20px 50px rgba(0,0,0,0.6); }
  .dark .plot-card{ background:linear-gradient(180deg,#071428,#042033); }
  .dark .result{ background: linear-gradient(180deg,#071a2b,#042033); border:1px solid rgba(255,255,255,0.03); }

  .container{position:relative;z-index:2;width:var(--card-w);padding:18px;border-radius:14px;background:var(--glass);backdrop-filter:blur(8px) saturate(120%);box-shadow:var(--shadow);transition:background .24s ease, box-shadow .24s ease}
  header{display:flex;align-items:center;gap:12px;justify-content:space-between}
  h1{font-size:18px;margin:0;font-weight:800}
  .controls{display:flex;gap:8px;align-items:center}

  .func-row{display:flex;gap:8px;margin:12px 0}
  .btn{display:inline-flex;align-items:center;gap:8px;padding:9px 12px;border-radius:10px;border:0;background:#f6f9ff;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(10,20,40,0.05);transition:transform .14s,box-shadow .14s,background .14s,opacity .18s}
  .btn:hover{transform:translateY(-3px)}
  .btn.active{background:linear-gradient(90deg,var(--accent1),#8a90ff);color:white;box-shadow:0 14px 40px rgba(106,115,255,0.16)}

  input[type=number]{padding:10px 12px;border-radius:10px;border:1px solid #d6e7ff;width:140px}
  .unit-toggle{display:flex;gap:6px}

  .main{display:grid;grid-template-columns:1fr 320px;gap:12px;align-items:start}
  .plot-card{border-radius:12px;padding:12px;background:linear-gradient(180deg,#fff,#f8fbff);box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);transition:background .25s}
  canvas{width:100%;height:240px;border-radius:8px;background:linear-gradient(180deg,#fbfdff,#eef8ff);display:block}

  .side{display:flex;flex-direction:column;gap:10px}
  .calc-btn{flex:1;padding:12px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent2),#0fb07b);color:white;font-weight:800;cursor:pointer}

  .result{border-radius:12px;padding:12px;background:linear-gradient(180deg,#fff,#f7fbff);min-height:72px;display:flex;flex-direction:column;gap:6px;transition:background .2s}
  .exact{font-weight:800;color:#0b2b52;font-size:15px}
  .approx{color:#556b86;font-size:13px}

  .pulse{animation:pulse 1.2s ease-in-out}
  @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

  @media (max-width:860px){:root{--card-w:94vw}.main{grid-template-columns:1fr}.plot-card canvas{height:200px}}
</style>
</head>
<body>
  <div class="bg-grid" id="bgGrid"></div>
  <div class="spot" id="spot"></div>

  <div class="container">
    <header>
      <div style="display:flex;align-items:center;gap:12px">
        <svg style="width:18px;height:18px" viewBox="0 0 24 24" fill="none"><path d="M12 2v20M2 12h20" stroke="#6c74ff" stroke-width="1.6" stroke-linecap="round"/></svg>
        <h1>Trigonometrik Hesaplayƒ±cƒ±</h1>
      </div>
      <div class="controls">
        <button id="themeToggle" class="btn">üåô Tema</button>
        <button id="installBtn" class="btn" style="display:none; background:#ffde59;">‚¨áÔ∏è Uygulamayƒ± ƒ∞ndir</button>
      </div>
    </header>

    <div class="func-row" id="funcRow">
      <button class="btn active" data-f="sin">sin</button>
      <button class="btn" data-f="cos">cos</button>
      <button class="btn" data-f="tan">tan</button>
      <button class="btn" data-f="cosec">cosec</button>
      <button class="btn" data-f="sec">sec</button>
      <button class="btn" data-f="cot">cot</button>
    </div>

    <div class="main">
      <div class="plot-card">
        <canvas id="plotCanvas"></canvas>
        <div style="display:flex;align-items:center;gap:8px;margin-top:10px">
          <label style="font-weight:700">A√ßƒ±:</label>
          <input id="angle" type="number" value="30" />
          <div class="unit-toggle">
            <button id="degBtn" class="btn active">¬∞</button>
            <button id="radBtn" class="btn">rad</button>
          </div>
        </div>
        <input id="angleRange" type="range" min="-360" max="360" step="0.1" value="30" style="width:100%;margin-top:10px">
      </div>

      <div class="side">
        <div style="display:flex;gap:8px">
          <button id="calcBtn" class="calc-btn">Hesapla ‚ú®</button>
          <button id="histBtn" class="btn">üìú</button>
        </div>
        <div class="result" id="result">
          <div class="exact" id="exact">‚Äî</div>
          <div class="approx" id="approx">Sonu√ß burada g√∂r√ºnecek.</div>
        </div>
      </div>
    </div>
  </div>

<script>
// --- PWA Service Worker Kayƒ±t ---
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js').catch(err => console.log('SW Hata:', err));
  });
}

// --- Uygulama ƒ∞ndirme Mantƒ±ƒüƒ± ---
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'inline-flex'; // Sadece indirilebilir olduƒüunda g√∂ster
});

installBtn.addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if (outcome === 'accepted') console.log('Uygulama indirildi');
    deferredPrompt = null;
    installBtn.style.display = 'none';
  }
});

// --- Matematiksel Fonksiyonlar (Aynƒ± Bƒ±rakƒ±ldƒ±) ---
const exactValues = { sin:{0:'0',30:'1/2',45:'‚àö2/2',60:'‚àö3/2',90:'1'}, cos:{0:'1',30:'‚àö3/2',45:'‚àö2/2',60:'1/2',90:'0'}, tan:{0:'0',30:'1/‚àö3',45:'1',60:'‚àö3',90:'Tanƒ±msƒ±z'} };
const angleInput = document.getElementById('angle');
const angleRange = document.getElementById('angleRange');
const plotCanvas = document.getElementById('plotCanvas');
const ctx = plotCanvas.getContext('2d');
let currentFunc = 'sin'; let unit = 'deg';

// √ñzetleme: Tema ve Plot √áizimi (Orijinal kodundaki fonksiyonlar buraya gelecek)
// Not: Kodun kƒ±salmasƒ± i√ßin orijinal fonksiyonlarƒ±nƒ± aynen devam ettiriyorsun.
function computeTrigValue(fn, rad){ switch(fn){ case 'sin': return Math.sin(rad); case 'cos': return Math.cos(rad); case 'tan': return Math.tan(rad); case 'cosec': return 1/Math.sin(rad); case 'sec': return 1/Math.cos(rad); case 'cot': return 1/Math.tan(rad); } }

function drawPlot(){
  const w = plotCanvas.width = plotCanvas.clientWidth * devicePixelRatio;
  const h = plotCanvas.height = 240 * devicePixelRatio;
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
  ctx.clearRect(0,0,w,h);
  // ... √áizim kodlarƒ±n (orijinalinden kopyala)
  ctx.fillStyle = '#6c74ff'; ctx.font = '12px Inter'; ctx.fillText(currentFunc.toUpperCase() + " Grafiƒüi", 10, 20);
}

// Olay tetikleyiciler
document.querySelectorAll('.func-row .btn').forEach(b => b.addEventListener('click', (e) => {
  document.querySelectorAll('.func-row .btn').forEach(x => x.classList.remove('active'));
  b.classList.add('active');
  currentFunc = b.dataset.f;
  drawPlot();
}));

document.getElementById('themeToggle').addEventListener('click', () => {
  document.documentElement.classList.toggle('dark');
});

angleRange.addEventListener('input', () => { angleInput.value = angleRange.value; drawPlot(); });
angleInput.addEventListener('input', () => { angleRange.value = angleInput.value; drawPlot(); });

window.addEventListener('resize', drawPlot);
drawPlot();
</script>
</body>
</html>
