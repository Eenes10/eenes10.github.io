<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trigonometrik DeÄŸer HesaplayÄ±cÄ± â€” v2.3</title>
<link rel="manifest" href="/manifest.json">
<style>
  :root{
    --card-w:760px;
    --accent1:#6c74ff;
    --accent2:#34d399;
    --bg1:#e6f2ff;
    --bg2:#bfe0ff;
    --glass: rgba(255,255,255,0.88);
    --muted:#445a78;
    --shadow: 0 18px 40px rgba(13,38,76,0.12);
  }
  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Arial,Helvetica,sans-serif}
  html,body{height:100%;margin:0}
  body{
    background: linear-gradient(160deg,var(--bg1),var(--bg2));
    display:flex;align-items:center;justify-content:center;padding:28px;color:#07204a;overflow:hidden;
  }

  .bg-grid{
    position:fixed;inset:0;z-index:0;pointer-events:none;opacity:0.28;
    background-image: repeating-linear-gradient(0deg, rgba(10,20,40,0.04) 0 1px, transparent 1px 28px),
                      repeating-linear-gradient(90deg, rgba(10,20,40,0.03) 0 1px, transparent 1px 28px);
    animation: gridPan 40s linear infinite;
  }
  @keyframes gridPan{from{background-position:0 0}to{background-position:400px 400px}}

  .spot { position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; mix-blend-mode:screen; z-index:1; filter: blur(10px); }

  .container{position:relative;z-index:2;width:var(--card-w);padding:18px;border-radius:14px;background:var(--glass);backdrop-filter:blur(8px) saturate(120%);box-shadow:var(--shadow)}
  header{display:flex;align-items:center;gap:12px;justify-content:space-between}
  h1{font-size:18px;margin:0;font-weight:800}

  .btn{padding:9px 12px;border-radius:10px;border:0;background:#f6f9ff;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(10,20,40,0.05);}
  .btn.active{background:linear-gradient(90deg,var(--accent1),#8a90ff);color:white}

  .main{display:grid;grid-template-columns:1fr 320px;gap:12px;align-items:start}
  canvas{width:100%;height:240px;border-radius:8px;background:linear-gradient(180deg,#fbfdff,#eef8ff)}

  .calc-btn{flex:1;padding:12px;border-radius:12px;border:0;background:linear-gradient(90deg,var(--accent2),#0fb07b);color:white;font-weight:800;cursor:pointer}

  @media (max-width:860px){:root{--card-w:94vw}.main{grid-template-columns:1fr}.plot-card canvas{height:200px}}
</style>
</head>
<body>
  <div class="bg-grid"></div>
  <div class="spot" id="spot"></div>

  <div class="container">
    <header>
      <div style="display:flex;align-items:center;gap:12px">
        <svg width="22" height="22" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="#6c74ff"/></svg>
        <h1>Trigonometrik DeÄŸer HesaplayÄ±cÄ±</h1>
      </div>
      <div class="controls">
        <button id="themeToggle" class="btn">ğŸŒ™ Tema</button>
        <button id="installBtn" class="btn" style="display:none">â¬‡ï¸ UygulamayÄ± Ekle</button>
      </div>
    </header>

    <!-- Social + Install Buttons -->
    <div style="display:flex; gap:10px; margin:10px 0 0 0;">
      <button id="installBtnTop" class="btn">â¬‡ï¸ UygulamayÄ± Ä°ndir</button>
      <a href="https://instagram.com" target="_blank" class="btn" style="text-decoration:none;">ğŸ“¸ Instagram</a>
    </div>

    <div class="func-row" id="funcRow">
      <button class="btn active" data-f="sin">sin</button>
      <button class="btn" data-f="cos">cos</button>
      <button class="btn" data-f="tan">tan</button>
      <button class="btn" data-f="cosec">cosec</button>
      <button class="btn" data-f="sec">sec</button>
      <button class="btn" data-f="cot">cot</button>
    </div>

    <div class="main">
      <div class="plot-card">
        <canvas id="plotCanvas" width="800" height="320"></canvas>
        <div style="margin-top:10px;display:flex;gap:8px">
          <label>AÃ§Ä±:</label>
          <input id="angle" type="number" value="30" />
          <button id="degBtn" class="btn active">Â°</button>
          <button id="radBtn" class="btn">rad</button>
        </div>
        <input id="angleRange" type="range" min="-360" max="360" step="0.1" value="30" style="width:100%;margin-top:10px">
      </div>

      <div class="side">
        <div class="actions" style="display:flex;gap:8px">
          <button id="calcBtn" class="calc-btn">Hesapla âœ¨</button>
        </div>
        <div class="result" id="result">
          <div class="exact" id="exact">â€”</div>
          <div class="approx" id="approx">SonuÃ§ burada gÃ¶rÃ¼necek.</div>
        </div>
      </div>
    </div>
  </div>

<script>
// === PWA INSTALL ===
let deferredPrompt;
const installBtn = document.getElementById("installBtn");
const installBtnTop = document.getElementById("installBtnTop");
const floatingBtn = document.getElementById("installBtnFloating");

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = "inline-flex";
  if (floatingBtn) floatingBtn.style.display = "inline-flex";
});

// Install button (footer)
installBtn.addEventListener("click", () => {
    if (!window.deferredPrompt) return;
    window.deferredPrompt.prompt();
    window.deferredPrompt.userChoice;
});

// Install button (top)
installBtnTop.addEventListener("click", () => {
    if (!window.deferredPrompt) return;
    window.deferredPrompt.prompt();
    window.deferredPrompt.userChoice;
});("click", async () => {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  const res = await deferredPrompt.userChoice;
  if (res.outcome === "accepted") installBtn.style.display = "none";
installBtnTop.style.display = "none";
  deferredPrompt = null;
});
</script>

<button id="installBtnFloating" class="btn" style="position:fixed; bottom:20px; right:20px; padding:12px 20px; border:none; border-radius:12px; background:#6c74ff; color:white; font-size:15px; cursor:pointer; box-shadow:0 0 12px rgba(108,116,255,.6); display:none; z-index:9999;">ğŸ“¥ UygulamayÄ± Ä°ndir</button>

</body>
</html>
